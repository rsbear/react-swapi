{"ast":null,"code":"import { useState, useEffect } from 'react';\nimport { useAllFilmsQuery, useAllCharacterNamesQuery, useAllStarshipsQuery } from '../generated/graphql';\nconst initState = [];\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'setType':\n      return [...state, action.payload];\n\n    default:\n      return [];\n  }\n};\n\nexport const useTypeFilter = () => {\n  // const [state, dispatch] = useReducer(reducer, initState)\n  const {\n    0: state,\n    1: setState\n  } = useState([]);\n  const movies = useAllFilmsQuery();\n  const persons = useAllCharacterNamesQuery();\n  const starships = useAllStarshipsQuery();\n  console.log(`ist this mounting?`);\n  useEffect(() => {\n    if (!movies.loading && !movies.error && movies.data) {\n      console.log(`state ${state}`);\n      console.log(`movies ${movies.data.allFilms}`);\n      setState(prevState => {\n        return [...prevState, ...movies.data.allFilms];\n      });\n    }\n  }, [state]);\n  return [state, setState];\n};","map":{"version":3,"sources":["/Users/rsbear/dev/swapiplayground/webapp/hooks/useTypeFilter.ts"],"names":["useState","useEffect","useAllFilmsQuery","useAllCharacterNamesQuery","useAllStarshipsQuery","initState","reducer","state","action","type","payload","useTypeFilter","setState","movies","persons","starships","console","log","loading","error","data","allFilms","prevState"],"mappings":"AAAA,SAAgBA,QAAhB,EAA0BC,SAA1B,QAAuD,OAAvD;AACA,SAASC,gBAAT,EAA2BC,yBAA3B,EAAsDC,oBAAtD,QAAkF,sBAAlF;AAEA,MAAMC,SAAS,GAAG,EAAlB;;AAEA,MAAMC,OAAO,GAAG,CAACC,KAAD,EAAQC,MAAR,KAAmB;AACjC,UAAQA,MAAM,CAACC,IAAf;AACE,SAAK,SAAL;AACE,aAAO,CAAC,GAAGF,KAAJ,EAAWC,MAAM,CAACE,OAAlB,CAAP;;AACF;AACE,aAAO,EAAP;AAJJ;AAMD,CAPD;;AASA,OAAO,MAAMC,aAAa,GAAG,MAAM;AACjC;AACA,QAAM;AAAA,OAACJ,KAAD;AAAA,OAAQK;AAAR,MAAoBZ,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAMa,MAAM,GAAGX,gBAAgB,EAA/B;AACA,QAAMY,OAAO,GAAGX,yBAAyB,EAAzC;AACA,QAAMY,SAAS,GAAGX,oBAAoB,EAAtC;AAEAY,EAAAA,OAAO,CAACC,GAAR,CAAa,oBAAb;AAEAhB,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI,CAACY,MAAM,CAACK,OAAR,IAAmB,CAACL,MAAM,CAACM,KAA3B,IAAoCN,MAAM,CAACO,IAA/C,EAAqD;AACnDJ,MAAAA,OAAO,CAACC,GAAR,CAAa,SAAQV,KAAM,EAA3B;AACAS,MAAAA,OAAO,CAACC,GAAR,CAAa,UAASJ,MAAM,CAACO,IAAP,CAAYC,QAAS,EAA3C;AACAT,MAAAA,QAAQ,CAACU,SAAS,IAAI;AACpB,eAAO,CAAC,GAAGA,SAAJ,EAAe,GAAGT,MAAM,CAACO,IAAP,CAAYC,QAA9B,CAAP;AACD,OAFO,CAAR;AAGD;AACF,GARQ,EAQN,CAACd,KAAD,CARM,CAAT;AAUA,SAAO,CAACA,KAAD,EAAQK,QAAR,CAAP;AACD,CApBM","sourcesContent":["import React, { useState, useEffect, useReducer } from 'react'\nimport { useAllFilmsQuery, useAllCharacterNamesQuery, useAllStarshipsQuery } from '../generated/graphql'\n\nconst initState = []\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'setType':\n      return [...state, action.payload]\n    default:\n      return []\n  }\n}\n\nexport const useTypeFilter = () => {\n  // const [state, dispatch] = useReducer(reducer, initState)\n  const [state, setState] = useState([])\n  const movies = useAllFilmsQuery()\n  const persons = useAllCharacterNamesQuery()\n  const starships = useAllStarshipsQuery()\n\n  console.log(`ist this mounting?`)\n\n  useEffect(() => {\n    if (!movies.loading && !movies.error && movies.data) {\n      console.log(`state ${state}`)\n      console.log(`movies ${movies.data.allFilms}`)\n      setState(prevState => {\n        return [...prevState, ...movies.data.allFilms]\n      })\n    }\n  }, [state])\n\n  return [state, setState]\n}"]},"metadata":{},"sourceType":"module"}